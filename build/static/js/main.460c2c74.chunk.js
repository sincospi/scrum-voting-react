(this["webpackJsonpscrum-voting-react"]=this["webpackJsonpscrum-voting-react"]||[]).push([[0],{126:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(10),i=t.n(o),c=t(14),l=(t(90),t(74));function u(e){var n=e.children,t=e.setSocket,r=e.setAppState;return Object(a.useEffect)((function(){console.debug("-------- App useEffect ----------- !!!");var e=Object(l.io)(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_URI,{transports:["websocket"]});return t(e),e.on("connect",(function(){var n=window.localStorage.getItem("name"),t=window.localStorage.getItem("vote");(n||t)&&e.emit("initUser",{name:n,vote:t})})),e.on("FromAPI",(function(n){console.debug({socketId:e.id,data:n}),r(n)})),function(){console.debug("************* App UseEffect Cleanup *****************"),e.disconnect(),e.removeAllListeners(),t(null)}}),[t,r]),n}var s=t(8),m=t(9);function d(){var e=Object(s.a)(["\n  font-size: 1rem;\n  padding: 10px;\n"]);return d=function(){return e},e}var p=m.a.div(d());function g(e){var n=e.className,t=e.timestamp;return r.a.createElement(p,{className:n},"Sync: ",r.a.createElement("time",null,(t||"").substring(11,23)))}function v(){var e=Object(s.a)(["\n  text-align: center;\n  padding: 20px 0;\n  & > span:nth-child(1) {\n    font-size: 30px;\n  }\n  & > span:nth-child(2) {\n    font-size: 10px;\n  }\n"]);return v=function(){return e},e}var f=m.a.div(v());function b(e){var n=e.className;return r.a.createElement(f,{className:n},r.a.createElement("span",null,"<ScrumVoting />"),r.a.createElement("br",null),r.a.createElement("span",null,"Your VOTE counts!"))}function E(){var e=Object(s.a)(["\n  font-size: 20px;\n  padding: 10px;\n"]);return E=function(){return e},e}var x=m.a.input(E());function h(e){var n,t=e.appState,o=e.socket,i=e.className,l=Object(a.useState)(window.localStorage.getItem("name")||""),u=Object(c.a)(l,2),s=u[0],m=u[1];return console.debug("NameForm re-render",s),console.debug("Name (from server)",null===(n=t.connectedUsers.find((function(e){return e.id===(null===o||void 0===o?void 0:o.id)})))||void 0===n?void 0:n.name),r.a.createElement(x,{className:i,value:s,onChange:function(e){var n=e.target.value;m(n)},onBlur:function(){console.debug("New name",s),window.localStorage.setItem("name",s),o.emit("setName",{name:s})},placeholder:"Your Name"})}var S="@media all and (min-width: 601px) and (max-width: 800px)",w="@media all and (max-width: 600px)";function k(){var e=Object(s.a)(['\n  margin-bottom: 20px;\n  background-color: rgba(212, 221, 228, 0.3);\n\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-template-areas: "time title name";\n\n  ',' {\n    grid-template-columns: 1fr 1fr;\n    grid-template-areas:\n      "title title"\n      "time name";\n  }\n\n  ',' {\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      "time"\n      "title"\n      "name";\n  }\n\n  & > .timestamp {\n    grid-area: time;\n    align-self: center;\n  }\n\n  & > .title {\n    grid-area: title;\n    align-self: center;\n  }\n\n  & > .name {\n    grid-area: name;\n    align-self: center;\n    margin: 10px;\n  }\n']);return k=function(){return e},e}var j=m.a.section(k(),S,w);function O(e){var n=e.appState,t=e.socket;return r.a.createElement(j,null,r.a.createElement(g,{className:"timestamp",timestamp:n.date}),r.a.createElement(b,{className:"title"}),r.a.createElement(h,{className:"name",appState:n,socket:t}))}var N=t(127);function y(e){var n=e.socket,t=e.setVote;return r.a.createElement(N.a,{className:"button-voting-reset",variant:"contained",color:"secondary",onClick:function(){console.debug("Reset clicked!"),window.localStorage.removeItem("vote"),n.emit("reset",{reset:!0}),t("")}},"Reset")}var V=t(163);function C(){var e=Object(s.a)(["\n  padding: 20px;\n  font-size: 30px;\n  border-radius: 20px;\n  background: linear-gradient(\n    90deg,\n    rgba(174, 244, 190, 1) 0%,\n    rgba(0, 212, 255, 1) 100%\n  );\n\n  "," {\n    border-radius: 0;\n  }\n"]);return C=function(){return e},e}var _=m.a.div(C(),w);function I(e){var n=e.className,t=e.appState,o=e.socket;console.debug("TitleForm re-render");var i=Object(a.useState)(t.title),l=Object(c.a)(i,2),u=l[0],s=l[1],m=Object(a.useState)(!1),d=Object(c.a)(m,2),p=d[0],g=d[1];return console.debug("title vs appState.title",u,t.title),p?r.a.createElement(V.a,{id:"voting-subject",className:n,label:"Vote Subject",multiline:!0,rows:4,defaultValue:u,variant:"outlined",onChange:function(e){var n=e.target.value;s(n)},onBlur:function(){console.debug("New title",u),o.emit("setTitle",{title:u}),g(!1)}}):r.a.createElement(_,{className:n,onClick:function(){s(t.title),g(!0)}},t.title||"Click here to set what we are voting on!")}var A=t(162),P=t(165),R=t(164);function T(e){var n,t=e.appState,o=e.socket,i=e.vote,l=e.setVote,u=Object(a.useState)(!1),s=Object(c.a)(u,2),m=s[0],d=s[1];function p(e){window.localStorage.setItem("vote",e),o.emit("setVote",{vote:e})}console.debug("VotePane re-render"),console.debug("Vote (from server)",null===(n=t.connectedUsers.find((function(e){return e.id===(null===o||void 0===o?void 0:o.id)})))||void 0===n?void 0:n.vote);var g=[1,2,3,5,8,13,21,34,"?"].map((function(e){return r.a.createElement(N.a,{key:e,onClick:function(){return l(n=e),void p(n);var n}},e)})),v=r.a.createElement(R.a,{checked:m,onChange:function(){return d((function(e){return!e}))},color:"default",inputProps:{"aria-label":"checkbox with default color"}});return r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"Your vote:"),r.a.createElement(A.a,{variant:"contained",color:"primary",size:"medium","aria-label":"contained primary button group"},g),r.a.createElement("div",null,r.a.createElement("input",{style:m?{color:"#fff"}:{},type:"text",value:i,onChange:function(e){var n=e.target.value;l(n)},onBlur:function(){return p(i)}}),r.a.createElement(P.a,{control:v,label:"Hide"})))}function U(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  & > .button-voting-reset {\n    margin: 20px 0 10px;\n  }\n\n  & .voting-subject {\n    width: 80%;\n    margin: 20px 0;\n  }\n\n  "," {\n    & .voting-subject {\n      width: 90%;\n    }\n  }\n\n  "," {\n    & .voting-subject {\n      width: auto;\n    }\n  }\n"]);return U=function(){return e},e}var z=m.a.section(U(),S,w);function B(e){var n=e.appState,t=e.socket,a=e.vote,o=e.setVote;return r.a.createElement(z,null,r.a.createElement(y,{socket:t,setVote:o}),r.a.createElement(I,{className:"voting-subject",appState:n,socket:t}),r.a.createElement(T,{appState:n,socket:t,vote:a,setVote:o}))}function F(){var e=Object(s.a)(["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n"]);return F=function(){return e},e}var W=m.a.ul(F());function D(e){var n=e.className,t=e.children;return r.a.createElement(W,{className:n},t)}function H(){var e=Object(s.a)(["\n  margin: 0;\n  padding: 0;\n  text-indent: 0;\n  list-style-type: none;\n\n  background-color: rgba(212, 221, 228, 0.3);\n  padding: 5px;\n  margin: 6px 0;\n  border-radius: 6px;\n"]);return H=function(){return e},e}var K=m.a.li(H());function L(e){var n=e.className,t=e.user;return r.a.createElement(K,{className:n},t.name||t.id)}function Y(e){var n=e.className,t=e.appState.connectedUsers.filter((function(e){return!e.vote})).sort((function(e,n){return(e.name||e.id).localeCompare(n.name||n.id)})).map((function(e){return r.a.createElement(L,{key:e.id,user:e})}));return r.a.createElement(D,{className:n},t)}function J(){var e=Object(s.a)(["\n    display: grid;\n    grid-template-columns: 3fr 1fr;\n    & :nth-child() {\n      align-self: center;\n    }\n    & :nth-child(2) {\n      text-align: center;\n    }\n  "]);return J=function(){return e},e}function M(e){return Object(m.a)(e)(J())}function q(){var e=Object(s.a)([""]);return q=function(){return e},e}function G(){var e=Object(s.a)([""]);return G=function(){return e},e}function Q(){var e=Object(s.a)(["\n  margin: 0;\n  padding: 0;\n  text-indent: 0;\n  list-style-type: none;\n\n  background-color: rgba(174, 244, 190, 0.7);\n  padding: 5px;\n  margin: 6px 0;\n  border-radius: 6px;\n"]);return Q=function(){return e},e}var X=M(m.a.li(Q())),Z=m.a.span(G()),$=m.a.b(q());function ee(e){var n=e.className,t=e.user,a="***";return e.revealVote&&(a="?"===t.vote?"\xaf\\_(\u30c4)_/\xaf":t.vote),r.a.createElement(X,{className:n},r.a.createElement(Z,null,t.name||t.id),r.a.createElement($,null,a))}function ne(e){var n=e.className,t=e.appState,a=t.connectedUsers.filter((function(e){return!!e.vote})).sort((function(e,n){return(e.name||e.id).localeCompare(n.name||n.id)})).map((function(e){return r.a.createElement(ee,{key:e.id,user:e,revealVote:t.revealVotes})}));return r.a.createElement(D,{className:n},a)}function te(e){var n=e.socket;return r.a.createElement(N.a,{variant:"contained",size:"small",color:"primary",onClick:function(){n.emit("reveal",{reveal:!0})}},"Reveal")}function ae(){var e=Object(s.a)(["\n  background-color: rgba(212, 221, 228, 0.3);\n  padding: 5px;\n  border-bottom: 1px solid rgba(212, 221, 228, 1);\n"]);return ae=function(){return e},e}function re(){var e=Object(s.a)(['\n  margin: 50px 0;\n  font-size: 1.4rem;\n  display: grid;\n  grid-template-columns: 1fr minmax(300px, 1.75fr) minmax(400px, 2fr) 1fr;\n  column-gap: 20px;\n  grid-template-areas:\n    ". waiting-header voted-header ."\n    ". waiting-list voted-list .";\n  grid-template-rows: auto;\n\n  & > .waiting-header {\n    grid-area: waiting-header;\n  }\n  & > .voted-header {\n    grid-area: voted-header;\n  }\n  & > .waiting-list {\n    grid-area: waiting-list;\n  }\n  & > .voted-list {\n    grid-area: voted-list;\n  }\n\n  ',' {\n    margin: 10px;\n    grid-template-columns: 1.75fr 2fr;\n    grid-template-areas:\n      "waiting-header voted-header"\n      "waiting-list voted-list";\n  }\n\n  ',' {\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      "waiting-header"\n      "waiting-list"\n      "voted-header"\n      "voted-list";\n    & > .voted-header {\n      margin-top: 20px;\n    }\n  }\n']);return re=function(){return e},e}var oe=m.a.section(re(),S,w),ie=m.a.div(ae()),ce=M(ie);function le(e){var n=e.appState,t=e.socket;return r.a.createElement(oe,null,r.a.createElement(ie,{className:"waiting-header"},r.a.createElement("div",null,"Waiting Area")),r.a.createElement(Y,{className:"waiting-list",appState:n,socket:t}),r.a.createElement(ce,{className:"voted-header"},r.a.createElement("div",null,"Voted"),r.a.createElement(te,{socket:t})),r.a.createElement(ne,{className:"voted-list",appState:n,socket:t}))}function ue(){var e=Object(s.a)(["\n  margin-top: 30px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  & > div,\n  & > img {\n    margin-top: 20px;\n  }\n  & > img {\n    height: 80px;\n    width: length * 107px;\n  }\n  & > div {\n    padding-bottom: 30px;\n  }\n"]);return ue=function(){return e},e}var se=m.a.footer(ue());function me(){return r.a.createElement(se,null,r.a.createElement("img",{src:"https://www.socialworkers.org/portals/0/Images/_Advocacy/social-justice/voting-banner.jpg",alt:"Voting Banner: My Vote Counts"}),r.a.createElement("div",null,"Source Code:",r.a.createElement("a",{href:"https://codesandbox.io/s/scrum-voting-nodejs-5jbgh"},"BackEnd"),","," ",r.a.createElement("a",{href:"https://codesandbox.io/s/scrum-voting-react-yenzw"},"FrontEnd")))}function de(e){var n=e.appState,t=e.socket,a=e.vote,o=e.setVote;return console.debug("Page re-render"),r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{appState:n,socket:t}),r.a.createElement(B,{appState:n,socket:t,vote:a,setVote:o}),r.a.createElement(le,{appState:n,socket:t}),r.a.createElement(me,null))}var pe=function(){var e=Object(a.useState)({date:null,connectedUsers:[],revealVotes:!1,title:""}),n=Object(c.a)(e,2),t=n[0],o=n[1],i=Object(a.useState)(null),l=Object(c.a)(i,2),s=l[0],m=l[1],d=Object(a.useState)(window.localStorage.getItem("vote")||""),p=Object(c.a)(d,2),g=p[0],v=p[1];return console.debug("APP Re-render"),r.a.createElement(u,{setSocket:m,setAppState:o},s?r.a.createElement(de,{appState:t,socket:s,vote:g,setVote:v}):r.a.createElement("p",null,"Waiting for socket to connect..."))},ge=document.getElementById("root");i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null)),ge)},85:function(e,n,t){e.exports=t(126)},90:function(e,n,t){}},[[85,1,2]]]);
//# sourceMappingURL=main.460c2c74.chunk.js.map